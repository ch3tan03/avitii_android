<section class="tab-product  p-b-0">
    <div class="row">
        <div class="col-sm-12 col-lg-12">
            <ul class="nav nav-justified nav-material nav-tabs" id="top-tab" role="tablist">
                <li class="nav-item">
                    <a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='received', 'show': selectedTab=='received'}"
                        data-toggle="tab" href="#top-home" id="top-home-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('received');" i18n>My Contracts
                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalPendingContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>

                    </a>
                    <div class="material-border"></div>
                </li>
                <li class="nav-item">
                    <a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='sent', 'show': selectedTab=='sent'}" data-toggle="tab"
                        href="#top-sent" id="profile-sent-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('sent')" i18n>Sent
                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalSentContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>
                    </a>
                    <div class="material-border"></div>
                </li>
                <li class="nav-item">
                    <a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='canceled', 'show': selectedTab=='canceled'}"
                        data-toggle="tab" href="#top-canceled" id="profile-canceled-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('canceled')" i18n>Cancelled
                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalCanceledContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Cancelled contracts"></i>
                    </a>
                    <div class="material-border"></div>
                </li>
                <li class="nav-item">
                    <a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='active', 'show': selectedTab=='active'}" data-toggle="tab"
                        href="#top-active" id="profile-active-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('active')" i18n>Active
                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalActiveContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>
                    </a>
                    <div class="material-border"></div>
                </li>
                <li class="nav-item">
                    <a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='paid', 'show': selectedTab=='paid'}" data-toggle="tab"
                        href="#top-profile" id="profile-top-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('paid')" i18n>Paid
                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalPaidContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>
                    </a>
                    <div class="material-border"></div>
                </li>
                <li class="nav-item"><a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='unpaid', 'show': selectedTab=='unpaid'}" data-toggle="tab"
                        href="#top-profile" id="profile-top-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('unpaid')" i18n>Unpaid
                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalUnPaidContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>
                    </a>
                    <div class="material-border"></div>
                </li>
                <li class="nav-item"><a aria-selected="false" class="nav-link"
                        [ngClass]="{ 'active': selectedTab=='inkasso', 'show': selectedTab=='inkasso'}"
                        data-toggle="tab" href="#top-contact" id="contact-top-tab" role="tab"
                        (click)="setFilteresOfMySessionDependsOnTab('inkasso')" i18n>Inkasso

                        &nbsp;
                        <span class="badge font-weight-light text-uppercase mr-2 badge-success">
                            {{authenticationService.currentUserLoanTypeWiseCountDetails.totalInkassoContract || 0}}
                        </span>
                        <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>
                    </a>
                    <div class="material-border"></div>
                </li>
                <!-- <li class="nav-item"><a aria-selected="true" class="nav-link" data-toggle="tab" href="#top-review" id="review-top-tab" role="tab" (click)="SessionStatusTypeFilter=[SessionStatus.Completed]">Completed 
                    <i class="icon-info-alt small ml-1 tooltip-info" data-toggle="tooltip"
                            title="Your applied loans those are accepted by LoanObj creator"></i>
                        </a>
                    <div class="material-border"></div>
                </li> -->
            </ul>
        </div>
    </div>
</section>

<section class="agency blog blog-sec blog-sidebar sider p-0 mt-4">
    <!-- ;-->
    <div class="card shadow-sm mb-4"
        *ngFor="let LoanObj of allSessionsData | mySessionsFilter : 'sessionAppliedByBorrowers[0].status' : (SessionStatusTypeFilter.length>0 ? SessionStatusTypeFilter:['accepted']):checkCreatedByUserId:checkCreatedByT:(SessionStatusTypeFilter.indexOf(SessionStatus.Pending)>-1)">
        <div class="bg-light2 blog-title card-header mb-0 text-capitalize">
            <span class="float-left">{{utilityService.returnLoanType(LoanObj.loanType)}}</span>
            <span class="float-right cursor-pointer" (click)="usersProfile(LoanObj.createdByUserObj)">
                <i class="icon icon-user"></i>
                {{LoanObj.createdByUserObj.firstName}}
                <i *ngIf="authenticationService.currentUserValue._id==LoanObj.createdByUserObj._id">*</i>
            </span>
        </div>
        <div class="card-body px-md-3 px-1 small">
            <div class="row">

                <div class="col-xl-4 col-12">
                    <div class="form-group border-right">
                        <label for="loanAmount" i18n>Loan Amount</label>
                        <h4 class="text-primary">
                            {{LoanObj.loanAmount}}
                        </h4>
                    </div>
                </div>
                <div class="col-xl-4 col-12">
                    <div class="form-group  border-right">
                        <label for="loanTenureInMonths" i18n>Tenure in Months</label>
                        <h4 class="text-primary">
                            {{LoanObj.loanTenureInMonths}}
                        </h4>
                    </div>
                </div>
                <div class="col-xl-4 col-12">
                    <div class="form-group">
                        <label for="loanInterestRate" i18n>Interest(%) Rate (per month)</label>
                        <h4 class="text-primary">
                            {{LoanObj.loanInterestRate}}
                        </h4>
                    </div>
                </div>
                <div class="col-xl-4 col-12">
                    <div class="form-group border-right">
                        <label for="loanStartDateTime" i18n>Start Date</label>
                        <h4 class="text-primary" i18n>
                            {{LoanObj.loanStartDateTime | date:'dd-MMM-YYYY'}}
                        </h4>
                    </div>
                </div>
                <div class="col-xl-4 col-12">
                    <div class="form-group  border-right">
                        <p class="mb-2" i18n>How to give the money</p>

                        <span *ngIf="utilityService.returnLoanRepaymentType('bank',LoanObj)>-1"
                            class="badge font-weight-light text-uppercase mr-2 badge-success">
                            BANK
                        </span>
                        <span *ngIf="utilityService.returnLoanRepaymentType('cash',LoanObj)>-1"
                            class="badge font-weight-light text-uppercase mr-2 badge-success">
                            Cash
                        </span>
                        <span *ngIf="utilityService.returnLoanRepaymentType('revolut',LoanObj)>-1"
                            class="badge font-weight-light text-uppercase mr-2 badge-success">
                            Revolut
                        </span>
                        <span *ngIf="utilityService.returnLoanRepaymentType('paypal',LoanObj)>-1"
                            class="badge font-weight-light text-uppercase mr-2 badge-success">
                            Paypal
                        </span>
                        <span *ngIf="utilityService.returnLoanRepaymentType('skrill',LoanObj)>-1"
                            class="badge font-weight-light text-uppercase badge-success">
                            Skrill
                        </span>
                    </div>
                </div>
                <div class="col-xl-12">
                    <p class="mb-2" i18n>Description:</p>
                    <div class="text-black-50" >
                        {{LoanObj.loanDescription}}
                    </div>
                </div>

            </div>
        </div>
        <div class="card-footer bg-white">
            <span
                class="badge badge-success font-weight-normal text-capitalize btn float-left">{{LoanObj.sessionType}}</span>
            <div class="row"
                [ngSwitch]="returnSessionApplyStatus(utilityService._.first(LoanObj.sessionAppliedByBorrowers))">
                <!-- the same view can be shown in more than one case -->
                <div class="col-xl-12" *ngSwitchCase="SessionStatus.Pending">
                    <!--
                    <a *ngIf="!check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)">APPLY</a>
                    <a *ngIf="check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)"> Details</a>
                    -->

                    <label *ngIf="LoanObj.loanMaxBorrower"
                        class="btn btn-primary text-capitalize btn-sm text-white" title="Received Requests/Total Applicants">
                        {{ _.keys(LoanObj.sessionAppliedByBorrowers).length || 0}}/{{LoanObj.loanMaxBorrower}}
                    </label>

                    <a class="btn btn-success text-capitalize btn-sm float-right text-white"
                        (click)="showAppliedToSession(LoanObj)" i18n> Details</a>
                    <a *ngIf="LoanObj.createdByUserObj._id==authenticationService.currentUserValue._id"
                        class="btn btn-danger text-capitalize btn-sm float-right text-white mr-2"><i class="icon icon-trash"
                            (click)="deleteSessionById(LoanObj._id)"></i></a>
                    
                    
                </div>
                <div class="col-xl-12" *ngSwitchCase="SessionStatus.Accepted">
                    <!--
                    <a *ngIf="!check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)">APPLY</a>
                    <a *ngIf="check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)"> Details</a>
                    -->
                    <a class="btn btn-success text-capitalize btn-sm float-right text-white"
                        (click)="showAppliedToSession(LoanObj)" i18n> Details</a>
                    <label *ngIf="LoanObj.loanMaxBorrower"
                        class="btn btn-primary text-capitalize btn-sm text-white">
                        {{ _.keys(LoanObj.sessionAppliedByBorrowers).length || 0}}/{{LoanObj.loanMaxBorrower}}
                    </label>
                </div>
                <div class="col-xl-12" *ngSwitchCase="SessionStatus.OngoingInitiated">
                    <!--
                    <button *ngIf="check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right" (click)="sessionApplyOngoingCheck(LoanObj, utilityService._.first(LoanObj.sessionAppliedByBorrowers))">
                        Proceed for Execution
                    </button>
                -->
                    <a class="btn btn-success text-capitalize btn-sm float-right text-white"
                        (click)="showAppliedToSession(LoanObj)" i18n> Details</a>
                    <label *ngIf="LoanObj.loanMaxBorrower"
                        class="btn btn-primary text-capitalize btn-sm text-white">
                        {{ _.keys(LoanObj.sessionAppliedByBorrowers).length || 0}}/{{LoanObj.loanMaxBorrower}}
                    </label>
                </div>
                <div class="col-xl-12" *ngSwitchCase="SessionStatus.AwaitingForApproval">
                    <a *ngIf="!check4applyToSession(LoanObj, checkCreatedByT)"
                        class="btn btn-success btn-sm text-capitalize float-right text-white"
                        (click)="showAppliedToSession(LoanObj)">
                        Details
                    </a>
                    <a *ngIf="check4applyToSession(LoanObj, checkCreatedByT)"
                        class="btn btn-success btn-sm text-capitalize float-right text-white"
                        (click)="showAppliedToSession(LoanObj)" i18n> <i class="icon-check fa-lg text-white"></i>
                        Proceed for Contract Sign
                    </a>
                    <label *ngIf="LoanObj.loanMaxBorrower"
                        class="btn btn-primary text-capitalize btn-sm text-white">
                        {{ _.keys(LoanObj.sessionAppliedByBorrowers).length || 0}}/{{LoanObj.loanMaxBorrower}}
                    </label>
                </div>
                <div class="col-xl-12" *ngSwitchCase="SessionStatus.Ongoing">
                    <!--
                    <a *ngIf="!check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)">
                        Details
                    </a>
                    <a *ngIf="check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success text-capitalize btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)"> <i class="icon-check fa-lg text-white"></i>
                        Proceed for Execution
                    </a>
                -->
                    <a class="btn btn-success text-capitalize btn-sm float-right text-white"
                        (click)="showAppliedToSession(LoanObj)"> Details</a>
                    <label *ngIf="LoanObj.loanMaxBorrower"
                        class="btn btn-primary text-capitalize btn-sm text-white">
                        {{ _.keys(LoanObj.sessionAppliedByBorrowers).length || 0}}/{{LoanObj.loanMaxBorrower}}
                    </label>
                </div>
                <!--default case when there are no matches -->
                <div class="col-xl-12" *ngSwitchDefault>
                    <!--
                    <a *ngIf="!check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success btn-sm text-capitalize float-right text-white" (click)="showAppliedToSession(LoanObj)">Apply</a>
                    <a *ngIf="check4applyToSession(LoanObj, checkCreatedByT)" class="btn btn-success btn-sm float-right text-white" (click)="showAppliedToSession(LoanObj)">Details</a>
                    -->
                    <a class="btn btn-success text-capitalize btn-sm float-right text-white"
                        (click)="showAppliedToSession(LoanObj)" i18n> Details</a>
                    <label *ngIf="LoanObj.loanMaxBorrower"
                        class="btn btn-primary text-capitalize btn-sm text-white">
                        {{ _.keys(LoanObj.sessionAppliedByBorrowers).length || 0}}/{{LoanObj.loanMaxBorrower}}
                    </label>
                </div>
            </div>
        </div>
    </div>

    <div class="mt-5 text-center blog-agency no-item">
        <!-- <img src="assets/img/noresult.png"> -->
        <!--
        <div class="spinner-border text-success mb-4"></div>
        <h2 class="text-black-50">Hold on updating Loan Data</h2>
        -->
    </div>
</section>